---
import Layout from "../layouts/Layout.astro";
import { getCollection, getEntry, render } from 'astro:content';
import type { Page } from '../content/config';
import PageSection from "src/components/PageSection.astro";

export async function getStaticPaths() {
  const pages = await getCollection('pages');
  return pages.map((page: any) => ({
    params: { slug: page.slug },
    props: { page }, // Pass page as a prop for convenience
  }));
}

interface Props {
  page: {
    data: Page
  }
}
const { slug } = Astro.params;
const { page } = Astro.props;

---
<Layout title="Placeholder">
  <div class="page">
    { page.data.sections.map(section => <PageSection {...section} />) }
    <!-- <pre>{JSON.stringify(page, null, 2)}</pre> -->
  </div>
</Layout>
