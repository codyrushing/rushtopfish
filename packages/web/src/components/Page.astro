---
import Layout from 'src/layouts/Layout.astro';
import type { Page } from '../content/config';
import PageSection from './PageSection.astro';
import Banner from './Banner.astro';
import RushTopFishLogo from './RushTopFishLogo.astro';
import Header from './Header.astro';

export interface Props {
  page: {
    data: Page
  }
}
const { page } = Astro.props;

---
<Layout title={page.data.title}>
  <Header />
	<main>
    <div class="page">
      { (page.data.banner && !page.data.banner.hidden) && <Banner {...page.data.banner} /> }
      { page.data.sections.map(section => <PageSection {...section} />) }
    </div>
	</main>
</Layout>
<script>
const externalLinks = document.querySelectorAll("a[href^=\"http\"]");;

for (const externalLink of externalLinks ?? []) {
  const href = externalLink.getAttribute("href");
  if (!href?.startsWith(window.location.origin)) {
    externalLink.setAttribute("target", "_blank");
  }
}
</script>
