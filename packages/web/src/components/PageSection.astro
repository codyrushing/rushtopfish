---
import { Image } from "astro:assets";
import type { Page } from "../content/config";
import { renderMarkdown } from "../utils/render-utils";

type Props = Page["sections"][number];

const props = Astro.props;
const slug = (props.slug ?? props.title).toLowerCase().replaceAll(/\W|\D/g, "");
const markdown = props.content ?? "";
const html = "<p>abc</p>";//await renderMarkdown(markdown);

const wrapperClasses = ["p-4", "md:p-8", "relative"]
if (props.size === "full_screen") {
  wrapperClasses.push("h-screen");
}
const images = import.meta.glob<{ default: ImageMetadata }>('/src/assets/**/*.{jpeg,jpg,png,gif}');

---
<section class={`page-section ${wrapperClasses.join(" ")}`} id={`section_${slug}`}>
    <div class="content" set:html={html} />
    { props.images?.length && <div class="images">
      { props.images.map(props => {
        return <figure>
            <div class="absolute top-0 left-0 w-full bottom-0">
                <Image src={images[`/${props.image}`]()} alt="abc" class="w-full h-full object-cover object-center" />
            </div>
        </figure>
      }) }
    </div> }
</section>
